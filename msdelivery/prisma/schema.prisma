// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum DeliveryPersonStatus {
  AVAILABLE    // Disponível para aceitar entregas
  BUSY         // Em entrega
  OFFLINE      // Offline/Indisponível
  ON_BREAK     // Em pausa
}

enum VehicleType {
  BIKE         // Bicicleta
  MOTORCYCLE   // Motocicleta
  CAR          // Carro
  SCOOTER      // Patinete/Scooter
  WALKING      // A pé
}

// Modelo principal de Entregador
model DeliveryPerson {
  id            String                @id @default(uuid())
  name          String
  email         String                @unique
  phone         String
  cpf           String                @unique
  vehicleType   VehicleType
  licensePlate  String?               // Placa do veículo (opcional para bike/walking)
  status        DeliveryPersonStatus  @default(OFFLINE)
  rating        Float                 @default(5.0)
  totalDeliveries Int                 @default(0)
  
  // Localização atual
  currentLatitude  Float?
  currentLongitude Float?
  lastLocationUpdate DateTime?
  
  // Informações de trabalho
  isActive      Boolean               @default(true)
  joinedAt      DateTime              @default(now())
  
  createdAt     DateTime              @default(now())
  updatedAt     DateTime              @updatedAt
  
  @@index([status])
  @@index([email])
  @@index([currentLatitude, currentLongitude])
  @@map("delivery_persons")
}
